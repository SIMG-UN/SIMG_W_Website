---
import Layout from "../../layouts/Layout.astro";
import Header from "../../components/Header.astro";
import EventCard from "../../components/EventCard.astro";
import { getCollection } from "astro:content";

// Get YouTube API credentials
const YOUTUBE_API_KEY = import.meta.env.PUBLIC_YOUTUBE_API_KEY;
const CHANNEL_ID = import.meta.env.PUBLIC_YOUTUBE_CHANNEL_ID;

// Fetch all Spanish events
const allEvents = await getCollection("events", ({ data }) => data.lang === "es");
const sortedEvents = allEvents.sort((a, b) => b.data.date.valueOf() - a.data.date.valueOf());

// Limit to 3 events each for consistent grid layout
const upcomingEvents = sortedEvents.filter(e => e.data.status === "upcoming" || e.data.status === "live").slice(0, 3);
const pastEvents = sortedEvents.filter(e => e.data.status === "completed").slice(0, 3);
---

<Layout title="Eventos | SIMG">
  <Header slot="header" />
  <main class="events-page">
    <h1 class="page-title">Eventos y Sesiones</h1>
    <p class="page-subtitle">
      Ãšnete al Semillero de InvestigaciÃ³n en Modelos Generativos cada semana. Exploramos investigaciÃ³n
      de vanguardia en IA, desde teorÃ­a hasta implementaciones prÃ¡cticas. Abierto a estudiantes, investigadores y profesionales.
    </p>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• HERO: UbicaciÃ³n y Contexto â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="hero-section">
      <div class="hero-grid">
        <!-- Panel de InformaciÃ³n -->
        <div class="info-panel">
          <div class="info-badge">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
            Cada viernes Â· 2:00 â€“ 4:00 PM (COT)
          </div>

          <h2>Sesiones Presenciales</h2>
          <p>
            Nuestras sesiones principales de investigaciÃ³n y discusiÃ³n se llevan a cabo en la
            <strong>Universidad Nacional de Colombia</strong>, sede BogotÃ¡.
          </p>

          <div class="location-detail">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z"></path><circle cx="12" cy="10" r="3"></circle></svg>
            <div>
              <strong>Edificio 404 â€” Yu Takeuchi</strong><br/>
              Departamentos de MatemÃ¡ticas, FÃ­sica y EstadÃ­stica<br/>
              <span class="room-info">SalÃ³n 202-405</span>
            </div>
          </div>

          <div class="hero-actions">
            <a
              href="https://calendar.google.com/calendar/render?action=TEMPLATE&text=Sesi%C3%B3n+Semanal+SIMG&recur=RRULE:FREQ=WEEKLY;BYDAY=FR&dates=20260227T190000Z/20260227T210000Z&details=Sesi%C3%B3n+semanal+del+Semillero+de+Investigaci%C3%B3n+en+Modelos+Generativos+(SIMG)+en+la+Universidad+Nacional+de+Colombia.&location=Sal%C3%B3n+202-405,+Edificio+404+Yu+Takeuchi,+Universidad+Nacional+de+Colombia,+Bogot%C3%A1&sf=true&output=xml"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-primary"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="4" width="18" height="18" rx="2" ry="2"></rect><line x1="16" y1="2" x2="16" y2="6"></line><line x1="8" y1="2" x2="8" y2="6"></line><line x1="3" y1="10" x2="21" y2="10"></line><line x1="12" y1="14" x2="12" y2="18"></line><line x1="10" y1="16" x2="14" y2="16"></line></svg>
              Agregar a Google Calendar (Recurrente)
            </a>
            <a
              href="https://www.google.com/maps/dir/?api=1&destination=Edificio+Yu+Takeuchi+Universidad+Nacional+de+Colombia+Bogota"
              target="_blank"
              rel="noopener noreferrer"
              class="btn btn-secondary"
            >
              <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><polygon points="3 11 22 2 13 21 11 13 3 11"></polygon></svg>
              CÃ³mo llegar
            </a>
          </div>
        </div>

        <!-- Google Map -->
        <div class="map-panel">
          <iframe
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d1988.3775674383194!2d-74.08357486487408!3d4.637716344836317!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x8e3f9b5c4db7a78b%3A0xe6aae4b28bf665a2!2s404%20-%20Departamentos%20de%20Matem%C3%A1ticas%2C%20F%C3%ADsica%20y%20Estad%C3%ADstica%20Yu%20Takeuchi!5e0!3m2!1ses-419!2sco!4v1757602729545!5m2!1ses-419!2sco"
            width="100%"
            height="100%"
            style="border:0; min-height: 350px;"
            allowfullscreen=""
            loading="lazy"
            referrerpolicy="no-referrer-when-downgrade"
            title="UbicaciÃ³n del Semillero SIMG en el Edificio Yu Takeuchi"
          ></iframe>
        </div>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• EVENTOS PRÃ“XIMOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    {upcomingEvents.length > 0 && (
      <section class="events-section">
        <h2 class="section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="10"></circle><polyline points="12 6 12 12 16 14"></polyline></svg>
          PrÃ³ximos Eventos
        </h2>
        <div class="events-grid">
          {upcomingEvents.map(event => (
            <EventCard event={event} />
          ))}
        </div>
      </section>
    )}

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• EVENTOS PASADOS â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    {pastEvents.length > 0 && (
      <section class="events-section">
        <h2 class="section-title">
          <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 3v5h5"></path><path d="M3.05 13A9 9 0 1 0 6 5.3L3 8"></path><path d="M12 7v5l4 2"></path></svg>
          Eventos Pasados y Grabaciones
        </h2>
        <div class="events-grid">
          {pastEvents.map(event => (
            <EventCard event={event} />
          ))}
        </div>
      </section>
    )}

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• GRABACIONES DE YOUTUBE â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="recordings-section">
      <h2 class="section-title">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="currentColor"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"></path></svg>
        Ãšltimos Videos de YouTube
      </h2>

      <div id="videos-container" class="videos-grid">
        <div class="loading">Cargando Ãºltimos videos...</div>
      </div>

      <div class="yt-actions">
        <a href="https://www.youtube.com/@simg-UN" target="_blank" rel="noopener noreferrer" class="btn btn-youtube">
          <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor"><path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"></path></svg>
          Visita nuestro Canal de YouTube
        </a>
        <a href="https://www.youtube.com/@simg-UN?sub_confirmation=1" target="_blank" rel="noopener noreferrer" class="btn btn-secondary">
          SuscrÃ­bete
        </a>
      </div>
    </section>

    <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• GUÃAS DE SESIÃ“N â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
    <section class="guidelines-section">
      <h2 class="section-title">GuÃ­a para las Sesiones</h2>
      <div class="guidelines-grid">
        <div class="guideline-card">
          <span class="guideline-icon">ğŸ“</span>
          <h3>Abierto a Todos</h3>
          <p>Las sesiones estÃ¡n abiertas a estudiantes e investigadores interesados en modelos generativos.</p>
        </div>
        <div class="guideline-card">
          <span class="guideline-icon">ğŸ’»</span>
          <h3>Trae tu PortÃ¡til</h3>
          <p>Recomendado para ejercicios prÃ¡cticos y sesiones de programaciÃ³n en vivo.</p>
        </div>
        <div class="guideline-card">
          <span class="guideline-icon">ğŸ</span>
          <h3>Python BÃ¡sico</h3>
          <p>Se recomienda conocimiento bÃ¡sico de programaciÃ³n en Python.</p>
        </div>
        <div class="guideline-card">
          <span class="guideline-icon">ğŸ’¬</span>
          <h3>Haz Preguntas</h3>
          <p>Se fomenta la participaciÃ³n activa y las preguntas durante las sesiones.</p>
        </div>
      </div>
    </section>
  </main>
</Layout>

<script define:vars={{ YOUTUBE_API_KEY, CHANNEL_ID }}>
  async function fetchLatestVideos() {
    const container = document.getElementById('videos-container');
    if (!container) return;

    if (!YOUTUBE_API_KEY || YOUTUBE_API_KEY === 'your_youtube_api_key_here') {
      container.innerHTML = `
        <div class="yt-fallback">
          <p>Visita nuestro <a href="https://www.youtube.com/@simg-UN" target="_blank">canal de YouTube</a> para ver las grabaciones de las sesiones.</p>
        </div>`;
      return;
    }

    try {
      const searchRes = await fetch(
        `https://www.googleapis.com/youtube/v3/search?key=${YOUTUBE_API_KEY}&channelId=${CHANNEL_ID}&part=snippet&order=date&maxResults=3&type=video`
      );
      const searchData = await searchRes.json();
      if (!searchData.items || searchData.items.length === 0) {
        container.innerHTML = '<p class="yt-fallback">No se encontraron videos. Visita nuestro <a href="https://www.youtube.com/@simg-UN" target="_blank">canal de YouTube</a>.</p>';
        return;
      }
      const videoIds = searchData.items.map(item => item.id.videoId).join(',');
      const detailsRes = await fetch(
        `https://www.googleapis.com/youtube/v3/videos?key=${YOUTUBE_API_KEY}&id=${videoIds}&part=snippet,contentDetails`
      );
      const detailsData = await detailsRes.json();
      container.innerHTML = detailsData.items.map(video => {
        const dur = formatDuration(video.contentDetails.duration);
        const pubDate = new Date(video.snippet.publishedAt).toLocaleDateString('es-CO', { year: 'numeric', month: 'short', day: 'numeric' });
        return `
          <a href="https://www.youtube.com/watch?v=${video.id}" target="_blank" rel="noopener noreferrer" class="video-card">
            <div class="video-thumbnail">
              <img src="${video.snippet.thumbnails.high.url}" alt="${video.snippet.title}" loading="lazy" />
              <div class="play-overlay"></div>
              ${dur ? `<span class="video-duration">${dur}</span>` : ''}
            </div>
            <div class="video-info">
              <h3 class="video-title">${video.snippet.title}</h3>
              <p class="video-date">${pubDate}</p>
            </div>
          </a>`;
      }).join('');
    } catch (error) {
      container.innerHTML = `
        <div class="yt-fallback">
          <p>No se pudieron cargar los videos. Visita nuestro <a href="https://www.youtube.com/@simg-UN" target="_blank">canal de YouTube</a>.</p>
        </div>`;
    }
  }

  function formatDuration(duration) {
    const match = duration.match(/PT(\d+H)?(\d+M)?(\d+S)?/);
    if (!match) return '';
    const h = (match[1] || '').replace('H', '');
    const m = (match[2] || '').replace('M', '');
    const s = (match[3] || '').replace('S', '');
    if (h) return `${h}:${m.padStart(2, '0')}:${s.padStart(2, '0')}`;
    return `${m || '0'}:${s.padStart(2, '0')}`;
  }

  fetchLatestVideos();
</script>

<style>
  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Page Layout â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .events-page {
    padding: 2rem 1.5rem;
    max-width: 1200px;
    margin: 0 auto;
  }

  .page-title {
    text-align: center;
    font-size: 2.5rem;
    background: linear-gradient(120deg, #F4C542 0%, #2E6DB4 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    margin-bottom: 0.75rem;
  }

  .page-subtitle {
    text-align: center;
    color: var(--text-secondary, #A8B3C3);
    font-size: 1.1rem;
    max-width: 700px;
    margin: 0 auto 3rem;
    line-height: 1.6;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Hero Section â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .hero-section {
    margin-bottom: 3rem;
  }

  .hero-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 2rem;
    background: linear-gradient(135deg, rgba(18, 35, 52, 0.95) 0%, rgba(12, 26, 38, 0.98) 100%);
    border: 1px solid rgba(244, 197, 66, 0.15);
    border-radius: 20px;
    overflow: hidden;
  }

  @media (min-width: 768px) {
    .hero-grid {
      grid-template-columns: 1fr 1fr;
    }
  }

  .info-panel {
    padding: 2.5rem;
    display: flex;
    flex-direction: column;
    gap: 1rem;
  }

  .info-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    background: rgba(244, 197, 66, 0.15);
    color: #F4C542;
    padding: 8px 16px;
    border-radius: 24px;
    font-size: 0.9rem;
    font-weight: 600;
    width: fit-content;
    border: 1px solid rgba(244, 197, 66, 0.25);
  }

  .info-panel h2 {
    font-size: 1.8rem;
    color: #E6E9EF;
    margin: 0;
  }

  .info-panel p {
    color: #A8B3C3;
    font-size: 1rem;
    line-height: 1.6;
    margin: 0;
  }

  .location-detail {
    display: flex;
    gap: 12px;
    align-items: flex-start;
    background: rgba(46, 109, 180, 0.1);
    padding: 1rem;
    border-radius: 12px;
    border: 1px solid rgba(46, 109, 180, 0.2);
  }

  .location-detail svg {
    flex-shrink: 0;
    color: #60a5fa;
    margin-top: 2px;
  }

  .location-detail div {
    color: #A8B3C3;
    font-size: 0.9rem;
    line-height: 1.5;
  }

  .location-detail strong {
    color: #E6E9EF;
  }

  .room-info {
    color: #F4C542;
    font-weight: 600;
  }

  .hero-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    margin-top: 0.5rem;
  }

  .map-panel {
    min-height: 350px;
  }

  .map-panel iframe {
    width: 100%;
    height: 100%;
    display: block;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Buttons â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .btn {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 10px 20px;
    border-radius: 24px;
    font-size: 0.9rem;
    font-weight: 600;
    text-decoration: none;
    transition: all 0.3s ease;
    cursor: pointer;
    border: none;
  }

  .btn-primary {
    background: linear-gradient(135deg, #F4C542 0%, #d97706 100%);
    color: #0C1A26;
    box-shadow: 0 4px 12px rgba(244, 197, 66, 0.3);
  }

  .btn-primary:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 20px rgba(244, 197, 66, 0.4);
  }

  .btn-secondary {
    background: rgba(46, 109, 180, 0.2);
    color: #93c5fd;
    border: 1px solid rgba(46, 109, 180, 0.3);
  }

  .btn-secondary:hover {
    background: rgba(46, 109, 180, 0.35);
    transform: translateY(-2px);
  }

  .btn-youtube {
    background: linear-gradient(135deg, #ff0000, #cc0000);
    color: white;
    box-shadow: 0 4px 12px rgba(255, 0, 0, 0.3);
  }

  .btn-youtube:hover {
    transform: translateY(-2px);
    box-shadow: 0 6px 16px rgba(255, 0, 0, 0.4);
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Section Titles â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .section-title {
    display: flex;
    align-items: center;
    gap: 10px;
    font-size: 1.8rem;
    margin-bottom: 1.5rem;
    background: linear-gradient(120deg, #F4C542 0%, #2E6DB4 100%);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
  }

  .section-title svg {
    flex-shrink: 0;
    color: #F4C542;
    -webkit-text-fill-color: initial;
    background: none;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Events Grid (max 3 columns) â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .events-section {
    margin-bottom: 3rem;
  }

  .events-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));
    gap: 1.5rem;
  }

  @media (min-width: 1024px) {
    .events-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• YouTube Section â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .recordings-section {
    margin-bottom: 3rem;
  }

  .videos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
    gap: 1.5rem;
    margin-bottom: 1.5rem;
  }

  @media (min-width: 1024px) {
    .videos-grid {
      grid-template-columns: repeat(3, 1fr);
    }
  }

  .loading {
    grid-column: 1 / -1;
    text-align: center;
    padding: 2rem;
    color: var(--text-secondary, #A8B3C3);
  }

  .yt-fallback {
    grid-column: 1 / -1;
    text-align: center;
    padding: 2rem;
    color: var(--text-secondary, #A8B3C3);
  }

  .yt-fallback a {
    color: #F4C542;
    text-decoration: underline;
  }

  .video-card {
    background: linear-gradient(135deg, rgba(18, 35, 52, 0.95) 0%, rgba(12, 26, 38, 0.98) 100%);
    border: 1px solid rgba(244, 197, 66, 0.15);
    border-radius: 16px;
    overflow: hidden;
    text-decoration: none;
    transition: all 0.3s ease;
    display: block;
  }

  .video-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 12px 30px rgba(244, 197, 66, 0.2);
    border-color: rgba(244, 197, 66, 0.4);
  }

  .video-thumbnail {
    position: relative;
    aspect-ratio: 16 / 9;
    overflow: hidden;
    background: #000;
  }

  .video-thumbnail img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    transition: transform 0.3s ease;
  }

  .video-card:hover .video-thumbnail img {
    transform: scale(1.05);
  }

  .play-overlay {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    width: 50px;
    height: 50px;
    background: rgba(244, 197, 66, 0.9);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.3s ease;
  }

  .play-overlay::after {
    content: "";
    width: 0;
    height: 0;
    border-left: 16px solid #0C1A26;
    border-top: 10px solid transparent;
    border-bottom: 10px solid transparent;
    margin-left: 3px;
  }

  .video-card:hover .play-overlay {
    transform: translate(-50%, -50%) scale(1.1);
    background: rgba(244, 197, 66, 1);
  }

  .video-duration {
    position: absolute;
    bottom: 8px;
    right: 8px;
    background: rgba(0, 0, 0, 0.8);
    color: #F4C542;
    padding: 3px 8px;
    border-radius: 6px;
    font-size: 0.8rem;
    font-weight: 600;
  }

  .video-info {
    padding: 1rem 1.25rem;
  }

  .video-title {
    color: #E6E9EF;
    font-size: 1rem;
    font-weight: 600;
    margin: 0 0 0.5rem;
    line-height: 1.3;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .video-date {
    color: #7a8898;
    font-size: 0.85rem;
    margin: 0;
  }

  .yt-actions {
    display: flex;
    flex-wrap: wrap;
    gap: 12px;
    justify-content: center;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Guidelines â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  .guidelines-section {
    margin-bottom: 3rem;
  }

  .guidelines-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(240px, 1fr));
    gap: 1.5rem;
  }

  .guideline-card {
    background: linear-gradient(135deg, rgba(18, 35, 52, 0.95) 0%, rgba(12, 26, 38, 0.98) 100%);
    border: 1px solid rgba(244, 197, 66, 0.1);
    border-radius: 16px;
    padding: 1.5rem;
    text-align: center;
    transition: all 0.3s ease;
  }

  .guideline-card:hover {
    border-color: rgba(244, 197, 66, 0.3);
    transform: translateY(-3px);
  }

  .guideline-icon {
    font-size: 2rem;
    display: block;
    margin-bottom: 0.75rem;
  }

  .guideline-card h3 {
    color: #E6E9EF;
    font-size: 1.1rem;
    margin: 0 0 0.5rem;
  }

  .guideline-card p {
    color: #A8B3C3;
    font-size: 0.9rem;
    margin: 0;
    line-height: 1.5;
  }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Light Mode â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  :global(.light-mode) .hero-grid {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border-color: rgba(46, 109, 180, 0.2);
  }

  :global(.light-mode) .info-panel h2 { color: #1a202c; }
  :global(.light-mode) .info-panel p { color: #4a5568; }
  :global(.light-mode) .info-badge { background: rgba(244, 197, 66, 0.1); color: #b45309; border-color: rgba(244, 197, 66, 0.3); }
  :global(.light-mode) .location-detail { background: rgba(46, 109, 180, 0.05); border-color: rgba(46, 109, 180, 0.15); }
  :global(.light-mode) .location-detail div { color: #4a5568; }
  :global(.light-mode) .location-detail strong { color: #1a202c; }
  :global(.light-mode) .page-subtitle { color: #4a5568; }

  :global(.light-mode) .video-card {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border-color: rgba(46, 109, 180, 0.15);
  }
  :global(.light-mode) .video-card:hover {
    box-shadow: 0 12px 30px rgba(46, 109, 180, 0.15);
    border-color: rgba(46, 109, 180, 0.3);
  }
  :global(.light-mode) .video-title { color: #1a202c; }
  :global(.light-mode) .video-date { color: #6b7280; }

  :global(.light-mode) .guideline-card {
    background: linear-gradient(135deg, #ffffff 0%, #f8fafc 100%);
    border-color: rgba(46, 109, 180, 0.15);
  }
  :global(.light-mode) .guideline-card h3 { color: #1a202c; }
  :global(.light-mode) .guideline-card p { color: #4a5568; }

  /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• Mobile â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
  @media (max-width: 768px) {
    .page-title { font-size: 1.8rem; }
    .info-panel { padding: 1.5rem; }
    .hero-actions { flex-direction: column; }
    .btn { justify-content: center; }
    .events-grid { grid-template-columns: 1fr; }
    .videos-grid { grid-template-columns: 1fr; }
    .guidelines-grid { grid-template-columns: 1fr; }
  }
</style>

<script>
  // Smooth scroll to event when hash is present in URL
  document.addEventListener('DOMContentLoaded', () => {
    if (window.location.hash) {
      const eventId = window.location.hash.substring(1);
      const eventElement = document.getElementById(eventId);
      
      if (eventElement) {
        // Wait for page to fully render, then scroll
        setTimeout(() => {
          eventElement.scrollIntoView({ behavior: 'smooth', block: 'center' });
          
          // Add highlight effect
          eventElement.style.animation = 'highlightEvent 2s ease-in-out';
        }, 100);
      }
    }
  });
</script>

<style is:global>
  @keyframes highlightEvent {
    0%, 100% { transform: scale(1); box-shadow: none; }
    50% { transform: scale(1.02); box-shadow: 0 0 30px rgba(46, 109, 180, 0.4); }
  }
</style>
